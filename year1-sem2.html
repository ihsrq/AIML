<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Year 1 Semester 2 | Digital Classroom Hub</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body class="year-page">
    <header class="year-hero">
      <div class="year-hero__content">
        <span class="year-hero__subtitle">GMU B.Tech AIML</span>
        <h1>Year 1 &mdash; Semester 2</h1>
        <p>Continue building your foundation with advanced programming, data structures, and engineering mathematics.</p>
        <a class="btn btn--outline" href="index.html">Back to Academic Years</a>
        <a class="btn" href="change-password.html">Change Password</a>
      </div>
    </header>

    <main class="year-main">
      <a class="back-link" href="index.html">Academic Years</a>
      <section class="subject-section">
        <h2>Core Subjects</h2>
        <div class="subjects__grid">
          <article class="subject-card" data-subject="u25cs1201">
            <figure class="subject-card__image">
              <img
                src="https://images.unsplash.com/photo-1635070041078-e363dbe005cb?auto=format&fit=crop&w=800&q=80"
                alt="Applied mathematics equations and formulas for computer science"
              />
            </figure>
            <h3>Applied Mathematics for Computer Science</h3>
            <p>Subject Code: U25CS1201</p>
            <p class="subject-credits">Credits: 3</p>
            <a href="data-structures-u25cs1106.html" class="subject-card__link">Go to Data Structures</a>
          </article>

          <article class="subject-card" data-subject="u25cs1202">
            <figure class="subject-card__image">
              <img
                src="https://images.unsplash.com/photo-1532094349884-543bc11b234d?auto=format&fit=crop&w=800&q=80"
                alt="Applied physics laboratory equipment and experiments for CSE"
              />
            </figure>
            <h3>Applied Physics for CSE</h3>
            <p>Subject Code: U25CS1202</p>
            <p class="subject-credits">Credits: 3</p>
            <a href="ml-fundamentals-u25cs2102.html" class="subject-card__link">Go to ML Fundamentals</a>
          </article>

          <article class="subject-card" data-subject="u25cs1203">
            <figure class="subject-card__image">
              <img
                src="https://images.unsplash.com/photo-1555066931-4365d14bab8c?auto=format&fit=crop&w=800&q=80"
                alt="Data structures diagram with nodes and connections"
              />
            </figure>
            <h3>Data Structures and Applications</h3>
            <p>Subject Code: U25CS1203</p>
            <p class="subject-credits">Credits: 4</p>
            <a href="deep-learning-u25cs2105.html" class="subject-card__link">Go to Deep Learning</a>
          </article>

          <article class="subject-card" data-subject="u25cs1204">
            <figure class="subject-card__image">
              <img
                src="https://images.unsplash.com/photo-1523437113738-bd3cc5fcf482?auto=format&fit=crop&w=800&q=80"
                alt="Python programming code and development environment"
              />
            </figure>
            <h3>Python Programming</h3>
            <p>Subject Code: U25CS1204</p>
            <p class="subject-credits">Credits: 3</p>
            <a href="computer-networks-u25cs2404.html" class="subject-card__link">Go to Computer Networks</a>
          </article>

          <article class="subject-card" data-subject="u25cs1205">
            <figure class="subject-card__image">
              <img
                src="https://images.unsplash.com/photo-1558494949-ef010cbcc31c?auto=format&fit=crop&w=800&q=80"
                alt="Computer network connections and infrastructure"
              />
            </figure>
            <h3>Fundamentals of Computer Networks</h3>
            <p>Subject Code: U25CS1205</p>
            <p class="subject-credits">Credits: 3</p>
            <a href="cloud-computing-u25cs2405.html" class="subject-card__link">Go to Cloud Computing</a>
          </article>

          <article class="subject-card" data-subject="u25cs2106">
            <figure class="subject-card__image">
              <img
                src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?auto=format&fit=crop&w=800&q=80"
                alt="Database management system architecture and diagrams"
              />
            </figure>
            <h3>Fundamentals of DBMS</h3>
            <p>Subject Code: U25CS2106</p>
            <p class="subject-credits">Credits: 3</p>
            <a href="software-engineering-u25cs2406.html" class="subject-card__link">Go to Software Engineering</a>
          </article>

          <article class="subject-card" data-subject="u25cs2107">
            <figure class="subject-card__image">
              <img
                src="https://images.unsplash.com/photo-1677442136019-21780ecad995?auto=format&fit=crop&w=800&q=80"
                alt="Project based learning and teamwork collaboration"
              />
            </figure>
            <h3>Project Based Learning</h3>
            <p>Subject Code: U25CS2107</p>
            <p class="subject-credits">Credits: 2</p>
            <a href="project-based-learning-u25cs2106.html" class="subject-card__link">Go to Project Based Learning</a>
          </article>
        </div>
      </section>

      <section class="subject-section subject-notes">
        <h2>Semester Resources</h2>
        <div class="notes-grid">
          <a
            class="btn btn--note"
            href="COLLEGE/APPLIED_MATHS/Mathematics_CS_Notes.pdf"
            download
            target="_blank"
            rel="noopener"
          >Applied Mathematics &mdash; Complete Notes</a>
          <a
            class="btn btn--note"
            href="COLLEGE/APPLIED_PHYSICS/Physics_CSE_Lab_Manual.pdf"
            download
            target="_blank"
            rel="noopener"
          >Applied Physics &mdash; Lab Manual</a>
          <a
            class="btn btn--note"
            href="COLLEGE/DATA_STRUCTURES/DS_Applications_Guide.pdf"
            download
            target="_blank"
            rel="noopener"
          >Data Structures &mdash; Applications Guide</a>
          <a
            class="btn btn--note"
            href="COLLEGE/PYTHON/Python_Programming_Exercises.pdf"
            download
            target="_blank"
            rel="noopener"
          >Python Programming &mdash; Practice Exercises</a>
          <a
            class="btn btn--note"
            href="COLLEGE/NETWORKS/Computer_Networks_Fundamentals.pdf"
            download
            target="_blank"
            rel="noopener"
          >Computer Networks &mdash; Fundamentals</a>
          <a
            class="btn btn--note"
            href="COLLEGE/DBMS/DBMS_Fundamentals_Tutorial.pdf"
            download
            target="_blank"
            rel="noopener"
          >DBMS &mdash; Fundamentals Tutorial</a>
        </div>
      </section>
    
      <!-- Student Results Section -->
      <section class="student-results" id="student-results" style="margin-top: 2rem; padding: 1.5rem; background: #f8f9fa; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        <h2 style="color: #2c3e50; margin-bottom: 1.5rem; font-size: 1.5rem; border-bottom: 2px solid #3498db; padding-bottom: 0.5rem;">Your Academic Results</h2>
        
        <div class="student-info" style="margin-bottom: 1.5rem; padding: 1rem; background: #fff; border-radius: 6px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
          <p style="margin: 0; font-size: 1.1rem;"><strong>Student ID:</strong> <span id="student-id-display" style="font-weight: bold; color: #2c3e50;">-</span></p>
        </div>
        
        <div class="results-table-container" style="overflow-x: auto;">
          <table class="results-table" style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
            <thead>
              <tr style="background-color: #3498db; color: white;">
                <th style="padding: 12px 15px; text-align: left;">Subject</th>
                <th style="padding: 12px 15px; text-align: left;">Subject Code</th>
                <th style="padding: 12px 15px; text-align: center;">Marks Obtained</th>
                <th style="padding: 12px 15px; text-align: center;">Max Marks</th>
                <th style="padding: 12px 15px; text-align: center;">Percentage</th>
                <th style="padding: 12px 15px; text-align: center;">Grade</th>
              </tr>
            </thead>
            <tbody id="results-body" style="background-color: #fff;">
              <tr>
                <td colspan="6" style="text-align: center; padding: 1rem; color: #7f8c8d;">Loading results...</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>
    </main>

    <script>
      document.addEventListener('DOMContentLoaded', function() {
        const studentId = localStorage.getItem('studentId');
        if (!studentId) {
          window.location.href = 'login.html';
          return;
        }
        
        document.getElementById('student-id-display').textContent = studentId;
        loadStudentResults(studentId);
        
        // Add logout functionality
        const logoutBtn = document.getElementById('logout-btn');
        if (logoutBtn) {
          logoutBtn.addEventListener('click', function(e) {
            e.preventDefault();
            localStorage.removeItem('studentId');
            window.location.href = 'login.html';
          });
        }
      });

      async function loadStudentResults(studentId) {
        try {
          // Fetch the scores data
          const response = await fetch('scores.json');
          if (!response.ok) throw new Error('Failed to load results');
          
          const scoresData = await response.json();
          const studentScores = scoresData[studentId];
          
          if (!studentScores) {
            throw new Error('No results found for this student');
          }

          // Get the current semester from the URL or page
          const currentPage = window.location.pathname.split('/').pop() || 'year1-sem2.html';
          const semester = currentPage.replace('.html', '');
          const results = studentScores[semester] || [];

          const tbody = document.getElementById('results-body');
          tbody.innerHTML = ''; // Clear loading message

          if (results.length === 0) {
            tbody.innerHTML = `
              <tr>
                <td colspan="6" style="text-align: center; padding: 2rem; color: #7f8c8d;">
                  No results available for this semester.
                </td>
              </tr>
            `;
            return;
          }

          results.forEach(result => {
            const percentage = ((result.obtained / result.max) * 100).toFixed(2);
            const grade = calculateGrade(percentage);
            
            const row = document.createElement('tr');
            row.style.borderBottom = '1px solid #ecf0f1';
            row.innerHTML = `
              <td style="padding: 12px 15px;">${result.subject}</td>
              <td style="padding: 12px 15px;">${result.code}</td>
              <td style="padding: 12px 15px; text-align: center;">${result.obtained}</td>
              <td style="padding: 12px 15px; text-align: center;">${result.max}</td>
              <td style="padding: 12px 15px; text-align: center; font-weight: 500; color: ${getPercentageColor(percentage)};">
                ${percentage}%
              </td>
              <td style="padding: 12px 15px; text-align: center; font-weight: bold; color: ${getGradeColor(grade)};">
                ${grade}
              </td>
            `;
            tbody.appendChild(row);
          });

          // Add a row for the total/percentage
          const totalObtained = results.reduce((sum, subj) => sum + subj.obtained, 0);
          const totalMax = results.reduce((sum, subj) => sum + subj.max, 0);
          const totalPercentage = ((totalObtained / totalMax) * 100).toFixed(2);
          const totalGrade = calculateGrade(totalPercentage);

          const totalRow = document.createElement('tr');
          totalRow.style.fontWeight = 'bold';
          totalRow.style.background = '#f8f9fa';
          totalRow.innerHTML = `
            <td colspan="2" style="padding: 12px 15px; text-align: right;">Total:</td>
            <td style="padding: 12px 15px; text-align: center;">${totalObtained}</td>
            <td style="padding: 12px 15px; text-align: center;">${totalMax}</td>
            <td style="padding: 12px 15px; text-align: center; color: ${getPercentageColor(totalPercentage)};">
              ${totalPercentage}%
            </td>
            <td style="padding: 12px 15px; text-align: center; color: ${getGradeColor(totalGrade)};">
              ${totalGrade}
            </td>
          `;
          tbody.appendChild(totalRow);

        } catch (error) {
          console.error('Error loading results:', error);
          const tbody = document.getElementById('results-body');
          tbody.innerHTML = `
            <tr>
              <td colspan="6" style="text-align: center; color: #e74c3c; padding: 2rem;">
                ${error.message || 'Error loading results. Please try again later.'}
              </td>
            </tr>
          `;
        }
      }

      function calculateGrade(percentage) {
        if (percentage >= 90) return 'A+';
        if (percentage >= 80) return 'A';
        if (percentage >= 70) return 'B';
        if (percentage >= 60) return 'C';
        if (percentage >= 50) return 'D';
        return 'F';
      }

      function getPercentageColor(percentage) {
        if (percentage >= 90) return '#27ae60';
        if (percentage >= 80) return '#2ecc71';
        if (percentage >= 70) return '#f39c12';
        if (percentage >= 60) return '#e67e22';
        return '#e74c3c';
      }

      function getGradeColor(grade) {
        const colors = {
          'A+': '#27ae60',
          'A': '#2ecc71',
          'B': '#f39c12',
          'C': '#e67e22',
          'D': '#e74c3c',
          'F': '#c0392b'
        };
        return colors[grade] || '#7f8c8d';
      }
    </script>

    <footer class="footer">
      <p>&copy; <span id="year"></span> Digital Classroom Hub. All rights reserved.</p>
    </footer>

    <script src="script.js"></script>
    
    <script src="script.js"></script>
    <script src="js/results.js"></script>
  </body>
</html>
